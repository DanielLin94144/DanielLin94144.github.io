---
layout: default
---

{% include base_path %}

<style>
    /* CSS-driven visibility - ROBUST */
    /* Default: Show English, Hide Chinese */
    #content-en {
        display: block !important;
        overflow: visible !important;
    }

    #content-zh {
        display: none !important;
        overflow: visible !important;
    }

    /* If body or html has lang-zh class: Show Chinese, Hide English */
    html.lang-zh #content-en,
    body.lang-zh #content-en,
    .lang-zh #content-en {
        display: none !important;
        visibility: hidden !important;
    }

    html.lang-zh #content-zh,
    body.lang-zh #content-zh,
    .lang-zh #content-zh {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        overflow: visible !important;
    }

    /* Ensure page content is fully visible */
    .page__content {
        overflow: visible !important;
        max-height: none !important;
    }

    /* Button Styling */
    .bilingual-container {
        display: flex;
        flex-wrap: wrap;
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;
    }

    .bilingual-sidebar {
        width: 250px;
        flex-shrink: 0;
        padding-right: 2rem;
    }

    .bilingual-content {
        flex: 1;
        min-width: 300px;
    }

    @media (max-width: 768px) {
        .bilingual-sidebar {
            width: 100%;
            padding-right: 0;
            margin-bottom: 2rem;
        }

        .bilingual-content {
            width: 100%;
        }
    }

    .lang-toggle {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #e1e4e8;
    }

    .lang-toggle a {
        padding: 0.5rem 1rem;
        border: 1px solid #d1d5da;
        border-radius: 6px;
        font-size: 0.875rem;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        color: #24292e;
        background: #f6f8fa;
    }

    /* Ensure active button states are clear */
    .lang-zh #btnZh {
        background: #28a745 !important;
        color: white !important;
        border-color: #28a745 !important;
    }

    html:not(.lang-zh) #btnEn,
    body:not(.lang-zh) #btnEn {
        background: #343a40 !important;
        color: white !important;
        border-color: #343a40 !important;
    }
</style>

<div class="bilingual-container">
    <aside class="bilingual-sidebar">
        {% include author-profile.html %}
    </aside>

    <main class="bilingual-content">
        <article class="page">
            <header>
                {% if page.title %}<h1 class="page__title">{{ page.title | markdownify | remove: "<p>" | remove: "</p>"
                    }}</h1>{% endif %}
                {% if page.read_time %}<p class="page__meta"><i class="fa fa-clock-o"></i> {% include read-time.html %}
                </p>{% endif %}
                {% if page.date %}<p class="page__date"><strong><i class="fa fa-fw fa-calendar"></i> Published:</strong>
                    <time>{{ page.date | date: "%B %d, %Y" }}</time>
                    <span style="margin-left: 1rem;"><i class="fa fa-eye"></i> <span id="gc-pageviews">--</span>
                        views</span>
                </p>{% endif %}
            </header>

            <div class="lang-toggle">
                <a href="#lang=zh" id="btnZh" onclick="window.setLanguage('zh'); return false;">繁體中文</a>
                <a href="#lang=en" id="btnEn" onclick="window.setLanguage('en'); return false;">English</a>
            </div>

            <section class="page__content">
                {{ content }}
            </section>

            <footer class="page__meta">
                {% include page__taxonomy.html %}
            </footer>

            {% include social-share.html %}
        </article>
    </main>
</div>

<!-- Language Toggle Script - Must run immediately -->
<script>
    // Define globally FIRST before anything else
    window.setLanguage = function (lang) {
        console.log('setLanguage called with:', lang);
        if (lang === 'zh') {
            document.documentElement.classList.add('lang-zh');
            document.body.classList.add('lang-zh');
            window.location.hash = 'lang=zh';
        } else {
            document.documentElement.classList.remove('lang-zh');
            document.body.classList.remove('lang-zh');
            window.location.hash = 'lang=en';
        }
    };

    // Check URL and apply language class
    (function () {
        function updateLanguage() {
            var hash = window.location.hash || '';
            var search = window.location.search || '';
            var isZh = (hash.indexOf('lang=zh') > -1) || (search.indexOf('lang=zh') > -1);

            console.log('updateLanguage - isZh:', isZh, 'hash:', hash);

            if (isZh) {
                document.documentElement.classList.add('lang-zh');
                if (document.body) document.body.classList.add('lang-zh');
            } else {
                document.documentElement.classList.remove('lang-zh');
                if (document.body) document.body.classList.remove('lang-zh');
            }
        }

        // Run immediately
        updateLanguage();

        // Run on all possible events
        window.addEventListener('hashchange', updateLanguage);
        document.addEventListener('DOMContentLoaded', updateLanguage);
        window.addEventListener('load', updateLanguage);
        setTimeout(updateLanguage, 50);
        setTimeout(updateLanguage, 200);
        setTimeout(updateLanguage, 500);

        // CountAPI - increments on EVERY page load (no deduplication)
        function loadAndIncrementViewCount() {
            var path = window.location.pathname;
            // Create a unique key from the path (remove special chars)
            var key = path.replace(/[^a-zA-Z0-9]/g, '_').replace(/^_+|_+$/g, '') || 'home';
            var namespace = 'daniellin94144';

            // CountAPI hit endpoint - increments counter and returns new value
            var apiUrl = 'https://api.countapi.xyz/hit/' + namespace + '/' + key;

            fetch(apiUrl)
                .then(function (r) { return r.json(); })
                .then(function (data) {
                    var el = document.getElementById('gc-pageviews');
                    if (el && data.value !== undefined) {
                        el.textContent = data.value;
                    }
                })
                .catch(function (e) {
                    console.log('View count error:', e);
                    // Fallback: try to just get the count without incrementing
                    var getUrl = 'https://api.countapi.xyz/get/' + namespace + '/' + key;
                    fetch(getUrl)
                        .then(function (r) { return r.json(); })
                        .then(function (data) {
                            var el = document.getElementById('gc-pageviews');
                            if (el && data.value !== undefined) {
                                el.textContent = data.value;
                            }
                        })
                        .catch(function () { });
                });
        }

        window.addEventListener('load', loadAndIncrementViewCount);
    })();
</script>